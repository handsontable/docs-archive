<div class="static-content">
  <div class="example-container clearfix">
    <h3>
      An implementation with Redux.
    </h3>
    <div data-jsfiddle="example4">
      <div id="example4" class="hot"></div>
    </div>

    <style data-jsfiddle="common">
      .redux-example-container {
        height: 240px;
        overflow: auto;
      }
      #my-hot {
        float: left;
      }
      #action-list {
        margin-left: 90px;
        float: left;
      }
    </style>
    <div class="codeLayout">
      <div class="buttons">
        <button class="jsFiddleLink" data-runfiddle="example4">
          <i class="fa fa-jsfiddle"></i>
          Edit
        </button>
      </div>
      <script type="text/jsx" data-jsfiddle="example4" data-jsfiddle-panel_js="3">
      import React from 'react';
      import ReactDOM from 'react-dom';
      import { createStore, combineReducers } from 'redux';
      import { HotTable } from '@handsontable/react';
      import Handsontable from 'handsontable';

      // Action reducer for afterChange callbacks triggered by Handsontable
      const changes = (state = [], action) => {
        switch (action.type) {
          case 'change':
            return [...state, {
                id: action.id,
                row: action.row,
                column: action.column,
                oldValue: action.oldValue,
                newValue: action.newValue,
                type: action.type
              }
            ]
          default:
            return state;
        }
      }
      const actionReducers = combineReducers({ changes });
      const reduxStore = createStore(actionReducers);

      // Component for printing the items stored in the redux store
      class ActionList extends React.Component {
        render() {
          let result = null;

          if (this.props.actionList.length === 0) {
            result = (
              <div className="empty">
                Empty. Make some edits to the table on the left!
              </div>
            );

          } else {
            result = this.props.actionList.map(function(action) {
              return (
                <li key={action.id} className={action.type}>
                  Value changed at <i>({action.row}, {action.column}) </i> from <strong>"{action.oldValue}"</strong> to <strong>"{action.newValue}"</strong>
                </li>
              );
            })
          }
          return (
            <div id="action-list">
              <h4>Change log:</h4>
              <ul>
                {result}
              </ul>
            </div>
          );
        }
      }

      class MyComponent extends React.Component {
        constructor(props) {
          super(props);
          this.handsontableData = Handsontable.helper.createSpreadsheetData(5, 3);
        }

        render() {
          return (
            <div className="redux-example-container">
              <HotTable id="my-hot" root="hot" settings={{
                  data: this.handsontableData,
                  colHeaders: true,
                  rowHeaders: true,
                  height: 180,
                  width: 200,
                  onAfterChange: (changes, source) => {
                    if (source === 'loadData') {
                      return;
                    }

                    changes.forEach(([row, column, oldValue, newValue]) => {
                      reduxStore.dispatch({
                        id: reduxStore.getState().changes.length,
                        type: 'change',
                        row,
                        column,
                        oldValue,
                        newValue,
                      });
                    });
                  }
                }}/>
              <ActionList actionList={reduxStore.getState().changes}/>
            </div>
          );
        }
      }

      const render = () => {
        ReactDOM.render(<MyComponent />, document.getElementById('example4'));
      }
      reduxStore.subscribe(render);
      render();</script>
    </div>
  </div>
    <p>
      <a href="https://github.com/handsontable/docs/edit/<?js= version ?>/tutorials/wrapper-for-react-examples-redux.html"
         class="edit-doc" target="_blank">Help us improve this page</a>
    </p>
</div>
<script data-jsfiddle="common" src="/<?js= env.opts.query.version ?>/scripts/jsfiddle-fixer.js"></script>
<script data-jsfiddle="common" src="https://cdn.jsdelivr.net/npm/react@16.4.1/umd/react.development.js"></script>
<script data-jsfiddle="common" src="https://cdn.jsdelivr.net/npm/react-dom@16.4.1/umd/react-dom.development.js"></script>
<script data-jsfiddle="common" src="https://cdn.jsdelivr.net/npm/@handsontable/react@1.0.0/dist/react-handsontable.min.js"></script>
<script data-jsfiddle="common" src="https://cdn.jsdelivr.net/npm/redux@4.0.0/dist/redux.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.0.0-beta.51/babel.min.js"></script>
